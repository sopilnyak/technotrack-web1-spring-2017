{% extends "core/base.html" %}
{% block title %}{{ blog.title }}{% endblock %}

{% block content %}
    <ol class="breadcrumb">
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'blogs:blogs' %}">Blogs</a></li>
        <li class="active">{{ blog.title }}</li>
    </ol>

    {% if blog.author == user %}
    <a href="{% url 'blogs:edit_blog' blog.id %}" class="btn btn-primary">Edit blog</a><br>
    {% endif %}

    <div class="container">
        <div><h3>{{ blog.title }}</h3></div>
        <div><h4>{{ blog.category.all|join:', ' }}</h4></div>
        <div><strong>{{ blog.author }}</strong>, {{ blog.created_at }}</div>
        <div>Last updated at {{ blog.updated_at }}</div>
        <br>
        <div>{{ blog.description }}</div>
    </div>

    <hr>

    {% if blog.author == user %}
        <a href="{% url "blogs:create_post" blog.id %}" class="btn btn-primary btn-block">Add new post</a>
        <br>
    {% endif %}

    {% for post in object.post_set.all reversed %}
        <div>
            <div><a href="{% url 'blogs:post_detail' post.id %}"><b>{{ post.header }}</b></a></div>
            <div>Author: {{ post.author }}, {{ post.created_at }}</div>
            <article>{{ post.description }}</article>
        </div>
        <hr>
    {% endfor %}

{% endblock %}
